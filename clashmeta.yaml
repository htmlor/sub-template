---
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7895
allow-lan: true
ipv6: false
bind-address: "*"
mode: rule
log-level: warning
unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome
find-process-mode: 'off'
geodata-mode: true
geo-auto-update: true
geodata-loader: memconservative
geo-update-interval: 24
geox-url:
  geoip: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat
  geosite: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat
  mmdb: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb
  asn: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/GeoLite2-ASN.mmdb
keep-alive-idle: 600
keep-alive-interval: 15

profile:
  store-selected: true
  store-fake-ip: true

dns:
  enable: true
  listen: 0.0.0.0:7874
  ipv6: false
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    # --- å±€åŸŸç½‘ä¸ç³»ç»Ÿæ ¸å¿ƒ ---
    - "+.lan"
    - "+.local"
    - "+.home.arpa"
    # --- å¾®è½¯è¿é€šæ€§æµ‹è¯• (å¿…é¡»ä¿ç•™ï¼Œå¦åˆ™ Windows æ˜¾ç¤ºæ— ç½‘ç»œ) ---
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.ipv6.microsoft.com"
    # --- æ¸¸æˆä¸è¯­éŸ³ (STUN éœ€è¦çœŸå® IP) ---
    - "stun.*.*.*"
    - "stun.*.*"
    - "*.*.*.srv.nintendo.net"
    - "*.*.stun.playstation.net"
    - "*.*.xboxlive.com"
    - "xbox.*.*.microsoft.com"
    # --- NTP æ—¶é—´åŒæ­¥ ---
    - pool.ntp.org
    - ntp.ubuntu.com
    - "ntp[1-7].aliyun.com"
    - "time[1-7].aliyun.com"
    - "time[1-7].apple.com"
    - "time[1-7].google.com"
    # --- Tailscale ---
    - "+.tailscale.com"
    - "+.tailscale.io"
    # --- å…œåº•å›½å†…åŸŸå ---
    - geosite:cn
  nameserver-policy:
    "geosite:cn":
      - https://dns.alidns.com/dns-query
      - https://doh.pub/dns-query
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

sniffer:
  enable: true
  override-destination: true
  sniff:
    QUIC:
      ports:
        - 443
    TLS:
      ports:
        - 443
        - 8443
    HTTP:
      ports:
        - 80
        - 8080-8880

proxies:
  - name: "ç¤ºä¾‹èŠ‚ç‚¹"
    type: vless
    server: 0.0.0.0
    port: 443
    uuid: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
    tls: true
    servername: example.com
    client-fingerprint: chrome
    network: ws
    ws-opts:
      path: "/?ed=2560"
      headers:
        Host: example.com

proxy-groups:
  - name: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
    type: select
    proxies: ["1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹", "âš¡ è‡ªåŠ¨é€‰æ‹©", DIRECT]
  - name: "âš¡ è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    proxies: ["ç¤ºä¾‹èŠ‚ç‚¹"]
    url: "https://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
  - name: "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹"
    type: select
    proxies: ["ç¤ºä¾‹èŠ‚ç‚¹"]
  - name: "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"
    type: select
    proxies: ["ç¤ºä¾‹èŠ‚ç‚¹"]
  - name: "ğŸ›‘ å¹¿å‘Šæ‹¦æˆª"
    type: select
    proxies: [REJECT]
  - name: "ğŸ¤– AI æœåŠ¡"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]
  - name: "ğŸ¬ å…¨çƒè§†é¢‘"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]
  - name: "ğŸ” è°·æ­ŒæœåŠ¡"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]
  - name: "â“‚ï¸ å¾®è½¯æœåŠ¡"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]
  - name: "ğŸ è‹¹æœæœåŠ¡"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]
  - name: "â˜ï¸ Cloudflare"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]
  - name: "ğŸ™ GitHub"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]
  - name: "ğŸ“² ç”µæŠ¥æ¶ˆæ¯"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]
  - name: "ğŸ¦ æ¨ç‰¹/X"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]
  - name: "â‚¿ åŠ å¯†è´§å¸"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]
  - name: "ğŸ  ç§æœ‰ç½‘ç»œ"
    type: select
    proxies: [DIRECT]
  - name: "ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿"
    type: select
    proxies: [DIRECT]
  - name: "ğŸ›  è‡ªå®šç›´è¿"
    type: select
    proxies: [DIRECT, "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"]
  - name: "ğŸŸ æ¼ç½‘ä¹‹é±¼"
    type: select
    proxies: ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "1ï¸âƒ£ é»˜è®¤èŠ‚ç‚¹", "2ï¸âƒ£ ç¬¬äºŒèŠ‚ç‚¹"]

rules:
  - AND,((DST-PORT,3478),(NETWORK,UDP)),DIRECT
  - IP-CIDR,208.111.0.0/16,DIRECT,no-resolve
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
  - DOMAIN-SUFFIX,tailscale.com,DIRECT
  - DOMAIN-SUFFIX,tailscale.io,DIRECT
  - DOMAIN-KEYWORD,derp,DIRECT
  - GEOSITE,category-ads-all,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - GEOSITE,private,ğŸ  ç§æœ‰ç½‘ç»œ
  - GEOIP,private,ğŸ  ç§æœ‰ç½‘ç»œ,no-resolve
  - DOMAIN-SUFFIX,iyf.tv,ğŸ¬ å…¨çƒè§†é¢‘
  - DOMAIN-SUFFIX,spaceship.com,ğŸ›  è‡ªå®šç›´è¿
  - DOMAIN-SUFFIX,spaceship-cdn.com,ğŸ›  è‡ªå®šç›´è¿
  - GEOSITE,apple@cn,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - GEOSITE,microsoft@cn,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - GEOSITE,steam@cn,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - GEOSITE,cloudflare,â˜ï¸ Cloudflare
  - GEOSITE,github,ğŸ™ GitHub
  - GEOSITE,telegram,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - GEOSITE,twitter,ğŸ¦ æ¨ç‰¹/X
  - GEOSITE,binance,â‚¿ åŠ å¯†è´§å¸
  - GEOSITE,openai,ğŸ¤– AI æœåŠ¡
  - GEOSITE,anthropic,ğŸ¤– AI æœåŠ¡
  - GEOSITE,youtube,ğŸ¬ å…¨çƒè§†é¢‘
  - GEOSITE,google,ğŸ” è°·æ­ŒæœåŠ¡
  - GEOSITE,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
  - GEOSITE,apple,ğŸ è‹¹æœæœåŠ¡
  - GEOSITE,cn,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - GEOIP,cn,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿,no-resolve
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼